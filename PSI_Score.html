<!DOCTYPE html>
<html lang="id">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>Skrining PSI Score - Pneumonia Severity Index</title>
    <link rel="stylesheet" href="https://cdnjs.cloudflare.com/ajax/libs/font-awesome/6.4.0/css/all.min.css">
    <style>
        * {
            margin: 0;
            padding: 0;
            box-sizing: border-box;
            font-family: 'Segoe UI', Tahoma, Geneva, Verdana, sans-serif;
        }
        
        body {
            background-color: #f0f7ff;
            color: #333;
            line-height: 1.6;
        }
        
        .container {
            max-width: 1200px;
            margin: 0 auto;
            padding: 20px;
        }
        
        /* Header Styles */
        header {
            display: flex;
            align-items: center;
            background: linear-gradient(135deg, #1a6dbb 0%, #2a8ae4 100%);
            color: white;
            padding: 20px;
            border-radius: 12px;
            box-shadow: 0 6px 15px rgba(0, 87, 146, 0.15);
            margin-bottom: 30px;
            position: relative;
            overflow: hidden;
        }
        
        header::before {
            content: '';
            position: absolute;
            top: -50%;
            right: -50%;
            width: 200px;
            height: 200px;
            background: rgba(255, 255, 255, 0.05);
            border-radius: 50%;
        }
        
        .logo-container {
            display: flex;
            align-items: center;
            gap: 20px;
            margin-right: 30px;
        }
        
        .logo {
            height: 80px;
            width: auto;
            border-radius: 8px;
            box-shadow: 0 4px 8px rgba(0, 0, 0, 0.1);
        }
        
        .logo-placeholder {
            height: 80px;
            width: 120px;
            background-color: rgba(255, 255, 255, 0.1);
            border-radius: 8px;
            display: flex;
            align-items: center;
            justify-content: center;
            color: rgba(255, 255, 255, 0.7);
            font-size: 0.8rem;
            text-align: center;
            padding: 5px;
        }
        
        .title-container {
            flex-grow: 1;
        }
        
        h1 {
            font-size: 1.8rem;
            margin-bottom: 8px;
            text-shadow: 1px 1px 3px rgba(0, 0, 0, 0.2);
        }
        
        .subtitle {
            font-size: 1rem;
            opacity: 0.9;
            font-weight: 300;
        }
        
        /* Main Content */
        .content-wrapper {
            display: flex;
            flex-wrap: wrap;
            gap: 30px;
            margin-bottom: 40px;
        }
        
        .calculator-section {
            flex: 1;
            min-width: 300px;
            background-color: white;
            border-radius: 12px;
            padding: 25px;
            box-shadow: 0 6px 15px rgba(0, 0, 0, 0.08);
        }
        
        .interpretation-section {
            flex: 1;
            min-width: 300px;
            background-color: white;
            border-radius: 12px;
            padding: 25px;
            box-shadow: 0 6px 15px rgba(0, 0, 0, 0.08);
        }
        
        h2 {
            color: #1a6dbb;
            margin-bottom: 20px;
            padding-bottom: 10px;
            border-bottom: 2px solid #e6f2ff;
            font-size: 1.4rem;
        }
        
        /* Form Styles */
        .form-group {
            margin-bottom: 20px;
        }
        
        label {
            display: block;
            margin-bottom: 8px;
            font-weight: 500;
            color: #444;
        }
        
        .form-control {
            width: 100%;
            padding: 12px 15px;
            border: 1px solid #d0e2ff;
            border-radius: 8px;
            font-size: 1rem;
            transition: all 0.3s;
            background-color: white;
        }
        
        .form-control:focus {
            outline: none;
            border-color: #2a8ae4;
            box-shadow: 0 0 0 3px rgba(42, 138, 228, 0.1);
        }
        
        .radio-group {
            display: flex;
            flex-wrap: wrap;
            gap: 15px;
            margin-top: 8px;
        }
        
        .radio-option {
            display: flex;
            align-items: center;
            gap: 8px;
        }
        
        .radio-option input {
            width: 18px;
            height: 18px;
        }
        
        /* Button Styles */
        .btn {
            display: inline-block;
            padding: 14px 28px;
            background: linear-gradient(to right, #1a6dbb, #2a8ae4);
            color: white;
            border: none;
            border-radius: 8px;
            font-size: 1rem;
            font-weight: 600;
            cursor: pointer;
            transition: all 0.3s;
            box-shadow: 0 4px 10px rgba(26, 109, 187, 0.2);
        }
        
        .btn:hover {
            background: linear-gradient(to right, #155a9e, #1a6dbb);
            transform: translateY(-2px);
            box-shadow: 0 6px 15px rgba(26, 109, 187, 0.25);
        }
        
        .btn:active {
            transform: translateY(0);
        }
        
        .btn-calculate {
            width: 100%;
            margin-top: 10px;
        }
        
        /* Result Styles */
        .result-container {
            margin-top: 30px;
            padding: 20px;
            background-color: #f8fbff;
            border-radius: 8px;
            border-left: 4px solid #2a8ae4;
            display: none;
        }
        
        .score-display {
            text-align: center;
            margin-bottom: 20px;
        }
        
        .score-value {
            font-size: 3rem;
            font-weight: 700;
            color: #1a6dbb;
            margin-bottom: 5px;
        }
        
        .score-label {
            font-size: 1.1rem;
            color: #666;
        }
        
        .risk-level {
            text-align: center;
            padding: 15px;
            border-radius: 8px;
            font-weight: 600;
            margin-bottom: 15px;
        }
        
        .risk-i {
            background-color: #e8f5e9;
            color: #2e7d32;
        }
        
        .risk-ii {
            background-color: #e3f2fd;
            color: #1565c0;
        }
        
        .risk-iii {
            background-color: #fff3e0;
            color: #ef6c00;
        }
        
        .risk-iv {
            background-color: #ffebee;
            color: #c62828;
        }
        
        .risk-v {
            background-color: #fce4ec;
            color: #880e4f;
        }
        
        .interpretation-text {
            line-height: 1.7;
        }
        
        /* Promotion Section */
        .promotion-section {
            background: linear-gradient(135deg, #f8fbff 0%, #e6f2ff 100%);
            border-radius: 12px;
            padding: 25px;
            margin-top: 40px;
            margin-bottom: 30px;
            box-shadow: 0 6px 15px rgba(0, 0, 0, 0.05);
            border: 1px solid #d0e2ff;
        }
        
        .promotion-content {
            display: flex;
            align-items: center;
            flex-wrap: wrap;
            gap: 25px;
        }
        
        .promotion-image {
            flex: 0 0 150px;
        }
        
        .promotion-image img {
            width: 150px;
            height: 150px;
            border-radius: 50%;
            object-fit: cover;
            border: 4px solid white;
            box-shadow: 0 6px 12px rgba(0, 0, 0, 0.1);
        }
        
        .promotion-image-placeholder {
            width: 150px;
            height: 150px;
            border-radius: 50%;
            background-color: #e0e0e0;
            display: flex;
            align-items: center;
            justify-content: center;
            color: #666;
            border: 4px solid white;
            box-shadow: 0 6px 12px rgba(0, 0, 0, 0.1);
        }
        
        .promotion-text {
            flex: 1;
            min-width: 300px;
        }
        
        .promotion-text h3 {
            color: #1a6dbb;
            margin-bottom: 10px;
        }
        
        .promotion-text p {
            margin-bottom: 15px;
            color: #555;
        }
        
        .btn-promotion {
            display: inline-block;
            padding: 12px 24px;
            background-color: #28a745;
            color: white;
            text-decoration: none;
            border-radius: 8px;
            font-weight: 600;
            transition: all 0.3s;
        }
        
        .btn-promotion:hover {
            background-color: #218838;
            transform: translateY(-2px);
            box-shadow: 0 6px 12px rgba(40, 167, 69, 0.2);
        }
        
        /* Footer */
        footer {
            text-align: center;
            padding: 25px;
            background-color: #1a6dbb;
            color: white;
            border-radius: 12px;
            margin-top: 40px;
        }
        
        .footer-text {
            margin-bottom: 10px;
        }
        
        .copyright {
            font-size: 0.9rem;
            opacity: 0.8;
        }
        
        /* Responsive Design */
        @media (max-width: 768px) {
            header {
                flex-direction: column;
                text-align: center;
            }
            
            .logo-container {
                margin-right: 0;
                margin-bottom: 15px;
                justify-content: center;
            }
            
            h1 {
                font-size: 1.5rem;
            }
            
            .promotion-content {
                flex-direction: column;
                text-align: center;
            }
        }
        
        /* Tooltip */
        .tooltip {
            position: relative;
            display: inline-block;
            color: #2a8ae4;
            cursor: help;
        }
        
        .tooltip .tooltiptext {
            visibility: hidden;
            width: 250px;
            background-color: #333;
            color: white;
            text-align: center;
            padding: 10px;
            border-radius: 6px;
            position: absolute;
            z-index: 1;
            bottom: 125%;
            left: 50%;
            margin-left: -125px;
            opacity: 0;
            transition: opacity 0.3s;
            font-size: 0.85rem;
            font-weight: normal;
        }
        
        .tooltip:hover .tooltiptext {
            visibility: visible;
            opacity: 1;
        }
        
        /* Required field indicator */
        .required::after {
            content: " *";
            color: #e74c3c;
        }
        
        /* Form validation */
        .error {
            border-color: #e74c3c !important;
        }
        
        .error-message {
            color: #e74c3c;
            font-size: 0.85rem;
            margin-top: 5px;
            display: none;
        }
        
        /* Empty state message */
        .empty-state {
            text-align: center;
            padding: 40px 20px;
            color: #666;
        }
        
        .empty-state i {
            font-size: 3rem;
            color: #d0e2ff;
            margin-bottom: 15px;
        }
    </style>
</head>
<body>
    <div class="container">
        <header>
            <div class="logo-container">
                <div class="logo-placeholder">
                    Logo KKLP.jpg
                </div>
                <div class="logo-placeholder">
                    Logo FK UPH.jpg
                </div>
            </div>
            <div class="title-container">
                <h1>Pneumonia Severity Index (PSI Score) Calculator</h1>
                <p class="subtitle">Alat skrining untuk menilai tingkat keparahan pneumonia dan menentukan rekomendasi penanganan</p>
            </div>
        </header>
        
        <div class="content-wrapper">
            <section class="calculator-section">
                <h2>Kalkulator PSI Score</h2>
                <p>Silakan isi data berikut untuk menghitung skor PSI:</p>
                
                <form id="psiForm">
                    <div class="form-group">
                        <label for="age" class="required">Usia (tahun)</label>
                        <input type="number" id="age" class="form-control" min="0" max="120" placeholder="Masukkan usia pasien">
                        <div class="error-message" id="age-error">Usia harus diisi antara 0-120 tahun</div>
                    </div>
                    
                    <div class="form-group">
                        <label class="required">Jenis Kelamin</label>
                        <div class="radio-group">
                            <div class="radio-option">
                                <input type="radio" id="male" name="gender" value="male">
                                <label for="male">Laki-laki</label>
                            </div>
                            <div class="radio-option">
                                <input type="radio" id="female" name="gender" value="female">
                                <label for="female">Perempuan</label>
                            </div>
                        </div>
                        <div class="error-message" id="gender-error">Pilih jenis kelamin pasien</div>
                    </div>
                    
                    <div class="form-group">
                        <label for="nursingHome" class="required">Apakah pasien berasal dari panti jompo?</label>
                        <select id="nursingHome" class="form-control">
                            <option value="" disabled selected>Pilih salah satu</option>
                            <option value="no">Tidak</option>
                            <option value="yes">Ya</option>
                        </select>
                        <div class="error-message" id="nursingHome-error">Pilih status panti jompo</div>
                    </div>
                    
                    <div class="form-group">
                        <label for="comorbidities" class="required">Penyakit penyerta (komorbiditas)</label>
                        <select id="comorbidities" class="form-control">
                            <option value="" disabled selected>Pilih penyakit penyerta</option>
                            <option value="none">Tidak ada</option>
                            <option value="neoplastic">Penyakit Neoplastik</option>
                            <option value="liver">Penyakit Hati</option>
                            <option value="heart">Gagal Jantung Kongestif</option>
                            <option value="cerebrovascular">Penyakit Serebrovaskular</option>
                            <option value="renal">Penyakit Ginjal</option>
                        </select>
                        <div class="error-message" id="comorbidities-error">Pilih status komorbiditas</div>
                    </div>
                    
                    <div class="form-group">
                        <label for="mentalStatus" class="required">
                            Status Mental 
                            <span class="tooltip">
                                <i class="fas fa-info-circle"></i>
                                <span class="tooltiptext">Penurunan kesadaran, disorientasi, atau perubahan status mental yang signifikan</span>
                            </span>
                        </label>
                        <select id="mentalStatus" class="form-control">
                            <option value="" disabled selected>Pilih status mental</option>
                            <option value="normal">Normal</option>
                            <option value="altered">Terganggu</option>
                        </select>
                        <div class="error-message" id="mentalStatus-error">Pilih status mental pasien</div>
                    </div>
                    
                    <div class="form-group">
                        <label for="respiratoryRate" class="required">Frekuensi Pernapasan (per menit)</label>
                        <input type="number" id="respiratoryRate" class="form-control" min="0" max="60" placeholder="Masukkan frekuensi pernapasan">
                        <div class="error-message" id="respiratoryRate-error">Frekuensi pernapasan harus diisi antara 0-60</div>
                    </div>
                    
                    <div class="form-group">
                        <label for="systolicBP" class="required">Tekanan Darah Sistolik (mmHg)</label>
                        <input type="number" id="systolicBP" class="form-control" min="0" max="300" placeholder="Masukkan tekanan darah sistolik">
                        <div class="error-message" id="systolicBP-error">Tekanan darah sistolik harus diisi antara 0-300 mmHg</div>
                    </div>
                    
                    <div class="form-group">
                        <label for="temperature" class="required">Suhu Tubuh (°C)</label>
                        <input type="number" id="temperature" class="form-control" min="30" max="45" step="0.1" placeholder="Masukkan suhu tubuh">
                        <div class="error-message" id="temperature-error">Suhu tubuh harus diisi antara 30-45°C</div>
                    </div>
                    
                    <div class="form-group">
                        <label for="heartRate" class="required">Denyut Jantung (per menit)</label>
                        <input type="number" id="heartRate" class="form-control" min="0" max="200" placeholder="Masukkan denyut jantung">
                        <div class="error-message" id="heartRate-error">Denyut jantung harus diisi antara 0-200</div>
                    </div>
                    
                    <div class="form-group">
                        <label for="ph">pH Arterial</label>
                        <input type="number" id="ph" class="form-control" min="6.5" max="7.8" step="0.01" placeholder="Masukkan pH (opsional)">
                        <small style="color: #666;">Kosongkan jika tidak tersedia</small>
                    </div>
                    
                    <div class="form-group">
                        <label for="bloodUrea" class="required">Ureum Darah (mg/dL)</label>
                        <input type="number" id="bloodUrea" class="form-control" min="0" max="200" step="0.1" placeholder="Masukkan nilai ureum darah">
                        <div class="error-message" id="bloodUrea-error">Ureum darah harus diisi antara 0-200 mg/dL</div>
                    </div>
                    
                    <div class="form-group">
                        <label for="sodium" class="required">Natrium Serum (mEq/L)</label>
                        <input type="number" id="sodium" class="form-control" min="100" max="180" placeholder="Masukkan kadar natrium serum">
                        <div class="error-message" id="sodium-error">Natrium serum harus diisi antara 100-180 mEq/L</div>
                    </div>
                    
                    <div class="form-group">
                        <label for="glucose" class="required">Glukosa Darah (mg/dL)</label>
                        <input type="number" id="glucose" class="form-control" min="0" max="800" placeholder="Masukkan kadar glukosa darah">
                        <div class="error-message" id="glucose-error">Glukosa darah harus diisi antara 0-800 mg/dL</div>
                    </div>
                    
                    <div class="form-group">
                        <label for="hematocrit" class="required">Hematokrit (%)</label>
                        <input type="number" id="hematocrit" class="form-control" min="0" max="70" step="0.1" placeholder="Masukkan nilai hematokrit">
                        <div class="error-message" id="hematocrit-error">Hematokrit harus diisi antara 0-70%</div>
                    </div>
                    
                    <div class="form-group">
                        <label for="paO2">PaO₂ (mmHg)</label>
                        <input type="number" id="paO2" class="form-control" min="0" max="200" placeholder="Masukkan PaO₂ (opsional)">
                        <small style="color: #666;">Kosongkan jika tidak tersedia</small>
                    </div>
                    
                    <div class="form-group">
                        <label for="pleuralEffusion" class="required">Efusi Pleura</label>
                        <select id="pleuralEffusion" class="form-control">
                            <option value="" disabled selected>Pilih status efusi pleura</option>
                            <option value="no">Tidak</option>
                            <option value="yes">Ya</option>
                        </select>
                        <div class="error-message" id="pleuralEffusion-error">Pilih status efusi pleura</div>
                    </div>
                    
                    <button type="button" class="btn btn-calculate" onclick="calculatePSIScore()">
                        <i class="fas fa-calculator"></i> Hitung PSI Score
                    </button>
                    
                    <button type="button" class="btn" onclick="resetForm()" style="margin-top: 10px; background: linear-gradient(to right, #6c757d, #868e96); width: 100%;">
                        <i class="fas fa-redo"></i> Reset Form
                    </button>
                </form>
                
                <div id="result" class="result-container">
                    <div class="score-display">
                        <div class="score-value" id="scoreValue">0</div>
                        <div class="score-label">Total PSI Score</div>
                    </div>
                    
                    <div id="riskLevel" class="risk-level"></div>
                    
                    <div class="interpretation-text">
                        <h3>Rekomendasi Penanganan:</h3>
                        <p id="recommendationText"></p>
                        
                        <h3>Interpretasi Klinis:</h3>
                        <p id="interpretationText"></p>
                    </div>
                </div>
                
                <div id="emptyState" class="empty-state">
                    <i class="fas fa-calculator"></i>
                    <h3>Data Belum Diisi</h3>
                    <p>Isi formulir di atas dan klik "Hitung PSI Score" untuk melihat hasil perhitungan.</p>
                </div>
            </section>
            
            <section class="interpretation-section">
                <h2>Interpretasi PSI Score</h2>
                
                <div class="interpretation-text">
                    <p>Pneumonia Severity Index (PSI) adalah sistem skoring yang digunakan untuk menilai tingkat keparahan pneumonia komunitas dan membantu dalam pengambilan keputusan mengenai perlunya rawat inap.</p>
                    
                    <h3>Klasifikasi Risiko:</h3>
                    
                    <div class="risk-level risk-i" style="margin-top: 15px;">
                        Kelas I: Skor ≤ 50 - Risiko Rendah
                    </div>
                    <p><strong>Mortalitas:</strong> 0.1%</p>
                    <p><strong>Penanganan:</strong> Dapat dirawat sebagai pasien rawat jalan dengan pemberian antibiotik oral.</p>
                    
                    <div class="risk-level risk-ii" style="margin-top: 15px;">
                        Kelas II: Skor 51-70 - Risiko Rendah
                    </div>
                    <p><strong>Mortalitas:</strong> 0.6%</p>
                    <p><strong>Penanganan:</strong> Dapat dirawat sebagai pasien rawat jalan dengan pemberian antibiotik oral.</p>
                    
                    <div class="risk-level risk-iii" style="margin-top: 15px;">
                        Kelas III: Skor 71-90 - Risiko Sedang
                    </div>
                    <p><strong>Mortalitas:</strong> 0.9%</p>
                    <p><strong>Penanganan:</strong> Pertimbangkan observasi singkat di unit gawat darurat atau rawat inap singkat.</p>
                    
                    <div class="risk-level risk-iv" style="margin-top: 15px;">
                        Kelas IV: Skor 91-130 - Risiko Tinggi
                    </div>
                    <p><strong>Mortalitas:</strong> 9.3%</p>
                    <p><strong>Penanganan:</strong> Direkomendasikan untuk rawat inap dengan pemantauan ketat.</p>
                    
                    <div class="risk-level risk-v" style="margin-top: 15px;">
                        Kelas V: Skor > 130 - Risiko Sangat Tinggi
                    </div>
                    <p><strong>Mortalitas:</strong> 27.0%</p>
                    <p><strong>Penanganan:</strong> Diperlukan rawat inap, mungkin di unit perawatan intensif.</p>
                    
                    <h3>Keterbatasan:</h3>
                    <p>PSI Score memiliki beberapa keterbatasan, termasuk kurang sensitif dalam mengidentifikasi pasien risiko rendah yang memerlukan rawat inap. Penilaian klinis oleh dokter tetap diperlukan untuk pengambilan keputusan akhir.</p>
                    
                    <h3>Parameter yang Dinilai:</h3>
                    <ul>
                        <li>Demografi (usia, jenis kelamin, tempat tinggal)</li>
                        <li>Penyakit penyerta (komorbiditas)</li>
                        <li>Tanda vital (frekuensi napas, tekanan darah, suhu, denyut jantung)</li>
                        <li>Status mental</li>
                        <li>Hasil laboratorium (pH, ureum, natrium, glukosa, hematokrit, PaO₂)</li>
                        <li>Hasil radiologi (efusi pleura)</li>
                    </ul>
                </div>
            </section>
        </div>
        
        <section class="promotion-section">
            <div class="promotion-content">
                <div class="promotion-image">
                    <div class="promotion-image-placeholder">
                        Foto Hendrik.jpg
                    </div>
                </div>
                <div class="promotion-text">
                    <h3>Mengalami Nyeri Punggung atau Kebas Saraf?</h3>
                    <p>Konsultasikan dengan dr. Hendrik, spesialis akupuntur dengan pengalaman lebih dari 10 tahun dalam menangani berbagai keluhan nyeri dan gangguan saraf. Pengobatan akupuntur dapat membantu mengurangi nyeri, meningkatkan sirkulasi, dan mempercepat pemulihan.</p>
                    <p>Terapi yang aman, efektif, dan tanpa efek samping dengan pendekatan holistik untuk kesehatan optimal.</p>
                    <a href="https://hendrikkho-akupuntur.github.io/profile/profile%20dr%20Hendrik%20akupuntur.html" class="btn-promotion" target="_blank">
                        <i class="fas fa-user-md"></i> Konsultasi dengan dr. Hendrik
                    </a>
                </div>
            </div>
        </section>
        
        <footer>
            <p class="footer-text">Dikembangkan Oleh Prodi PPDS KKLP FK UPH - dr Hendrik</p>
            <p class="copyright">© 2025 - Program Studi Spesialis Kedokteran Primer FK UPH</p>
        </footer>
    </div>

    <script>
        // Fungsi untuk reset form
        function resetForm() {
            document.getElementById('psiForm').reset();
            
            // Sembunyikan hasil dan tampilkan empty state
            document.getElementById('result').style.display = 'none';
            document.getElementById('emptyState').style.display = 'block';
            
            // Hapus error state
            const errorMessages = document.querySelectorAll('.error-message');
            errorMessages.forEach(error => {
                error.style.display = 'none';
            });
            
            const formControls = document.querySelectorAll('.form-control, input[type="radio"]');
            formControls.forEach(control => {
                control.classList.remove('error');
            });
            
            // Reset radio buttons
            document.querySelectorAll('input[type="radio"]').forEach(radio => {
                radio.checked = false;
            });
            
            // Reset select elements to first option
            document.querySelectorAll('select').forEach(select => {
                select.selectedIndex = 0;
            });
        }
        
        // Fungsi untuk validasi form
        function validateForm() {
            let isValid = true;
            
            // Validasi usia
            const age = document.getElementById('age').value;
            if (!age || age < 0 || age > 120) {
                document.getElementById('age').classList.add('error');
                document.getElementById('age-error').style.display = 'block';
                isValid = false;
            } else {
                document.getElementById('age').classList.remove('error');
                document.getElementById('age-error').style.display = 'none';
            }
            
            // Validasi jenis kelamin
            const gender = document.querySelector('input[name="gender"]:checked');
            if (!gender) {
                document.getElementById('gender-error').style.display = 'block';
                isValid = false;
            } else {
                document.getElementById('gender-error').style.display = 'none';
            }
            
            // Validasi panti jompo
            const nursingHome = document.getElementById('nursingHome').value;
            if (!nursingHome) {
                document.getElementById('nursingHome').classList.add('error');
                document.getElementById('nursingHome-error').style.display = 'block';
                isValid = false;
            } else {
                document.getElementById('nursingHome').classList.remove('error');
                document.getElementById('nursingHome-error').style.display = 'none';
            }
            
            // Validasi komorbiditas
            const comorbidities = document.getElementById('comorbidities').value;
            if (!comorbidities) {
                document.getElementById('comorbidities').classList.add('error');
                document.getElementById('comorbidities-error').style.display = 'block';
                isValid = false;
            } else {
                document.getElementById('comorbidities').classList.remove('error');
                document.getElementById('comorbidities-error').style.display = 'none';
            }
            
            // Validasi status mental
            const mentalStatus = document.getElementById('mentalStatus').value;
            if (!mentalStatus) {
                document.getElementById('mentalStatus').classList.add('error');
                document.getElementById('mentalStatus-error').style.display = 'block';
                isValid = false;
            } else {
                document.getElementById('mentalStatus').classList.remove('error');
                document.getElementById('mentalStatus-error').style.display = 'none';
            }
            
            // Validasi frekuensi pernapasan
            const respiratoryRate = document.getElementById('respiratoryRate').value;
            if (!respiratoryRate || respiratoryRate < 0 || respiratoryRate > 60) {
                document.getElementById('respiratoryRate').classList.add('error');
                document.getElementById('respiratoryRate-error').style.display = 'block';
                isValid = false;
            } else {
                document.getElementById('respiratoryRate').classList.remove('error');
                document.getElementById('respiratoryRate-error').style.display = 'none';
            }
            
            // Validasi tekanan darah sistolik
            const systolicBP = document.getElementById('systolicBP').value;
            if (!systolicBP || systolicBP < 0 || systolicBP > 300) {
                document.getElementById('systolicBP').classList.add('error');
                document.getElementById('systolicBP-error').style.display = 'block';
                isValid = false;
            } else {
                document.getElementById('systolicBP').classList.remove('error');
                document.getElementById('systolicBP-error').style.display = 'none';
            }
            
            // Validasi suhu tubuh
            const temperature = document.getElementById('temperature').value;
            if (!temperature || temperature < 30 || temperature > 45) {
                document.getElementById('temperature').classList.add('error');
                document.getElementById('temperature-error').style.display = 'block';
                isValid = false;
            } else {
                document.getElementById('temperature').classList.remove('error');
                document.getElementById('temperature-error').style.display = 'none';
            }
            
            // Validasi denyut jantung
            const heartRate = document.getElementById('heartRate').value;
            if (!heartRate || heartRate < 0 || heartRate > 200) {
                document.getElementById('heartRate').classList.add('error');
                document.getElementById('heartRate-error').style.display = 'block';
                isValid = false;
            } else {
                document.getElementById('heartRate').classList.remove('error');
                document.getElementById('heartRate-error').style.display = 'none';
            }
            
            // Validasi ureum darah
            const bloodUrea = document.getElementById('bloodUrea').value;
            if (!bloodUrea || bloodUrea < 0 || bloodUrea > 200) {
                document.getElementById('bloodUrea').classList.add('error');
                document.getElementById('bloodUrea-error').style.display = 'block';
                isValid = false;
            } else {
                document.getElementById('bloodUrea').classList.remove('error');
                document.getElementById('bloodUrea-error').style.display = 'none';
            }
            
            // Validasi natrium serum
            const sodium = document.getElementById('sodium').value;
            if (!sodium || sodium < 100 || sodium > 180) {
                document.getElementById('sodium').classList.add('error');
                document.getElementById('sodium-error').style.display = 'block';
                isValid = false;
            } else {
                document.getElementById('sodium').classList.remove('error');
                document.getElementById('sodium-error').style.display = 'none';
            }
            
            // Validasi glukosa darah
            const glucose = document.getElementById('glucose').value;
            if (!glucose || glucose < 0 || glucose > 800) {
                document.getElementById('glucose').classList.add('error');
                document.getElementById('glucose-error').style.display = 'block';
                isValid = false;
            } else {
                document.getElementById('glucose').classList.remove('error');
                document.getElementById('glucose-error').style.display = 'none';
            }
            
            // Validasi hematokrit
            const hematocrit = document.getElementById('hematocrit').value;
            if (!hematocrit || hematocrit < 0 || hematocrit > 70) {
                document.getElementById('hematocrit').classList.add('error');
                document.getElementById('hematocrit-error').style.display = 'block';
                isValid = false;
            } else {
                document.getElementById('hematocrit').classList.remove('error');
                document.getElementById('hematocrit-error').style.display = 'none';
            }
            
            // Validasi efusi pleura
            const pleuralEffusion = document.getElementById('pleuralEffusion').value;
            if (!pleuralEffusion) {
                document.getElementById('pleuralEffusion').classList.add('error');
                document.getElementById('pleuralEffusion-error').style.display = 'block';
                isValid = false;
            } else {
                document.getElementById('pleuralEffusion').classList.remove('error');
                document.getElementById('pleuralEffusion-error').style.display = 'none';
            }
            
            return isValid;
        }
        
        function calculatePSIScore() {
            // Validasi form
            if (!validateForm()) {
                return;
            }
            
            // Get form values
            const age = parseInt(document.getElementById('age').value);
            const gender = document.querySelector('input[name="gender"]:checked').value;
            const nursingHome = document.getElementById('nursingHome').value;
            const comorbidities = document.getElementById('comorbidities').value;
            const mentalStatus = document.getElementById('mentalStatus').value;
            const respiratoryRate = parseInt(document.getElementById('respiratoryRate').value);
            const systolicBP = parseInt(document.getElementById('systolicBP').value);
            const temperature = parseFloat(document.getElementById('temperature').value);
            const heartRate = parseInt(document.getElementById('heartRate').value);
            const ph = document.getElementById('ph').value ? parseFloat(document.getElementById('ph').value) : null;
            const bloodUrea = parseFloat(document.getElementById('bloodUrea').value);
            const sodium = parseInt(document.getElementById('sodium').value);
            const glucose = parseInt(document.getElementById('glucose').value);
            const hematocrit = parseFloat(document.getElementById('hematocrit').value);
            const paO2 = document.getElementById('paO2').value ? parseInt(document.getElementById('paO2').value) : null;
            const pleuralEffusion = document.getElementById('pleuralEffusion').value;
            
            // Calculate PSI score
            let score = 0;
            
            // Age points (for males)
            if (gender === 'male') {
                score += age;
            } else {
                // For females, age points = age - 10
                score += Math.max(0, age - 10);
            }
            
            // Nursing home
            if (nursingHome === 'yes') score += 10;
            
            // Comorbidities
            if (comorbidities === 'neoplastic') score += 30;
            if (comorbidities === 'liver') score += 20;
            if (comorbidities === 'heart') score += 10;
            if (comorbidities === 'cerebrovascular') score += 10;
            if (comorbidities === 'renal') score += 10;
            
            // Altered mental status
            if (mentalStatus === 'altered') score += 20;
            
            // Respiratory rate ≥ 30/min
            if (respiratoryRate >= 30) score += 20;
            
            // Systolic BP < 90 mmHg
            if (systolicBP < 90) score += 20;
            
            // Temperature < 35°C or ≥ 40°C
            if (temperature < 35 || temperature >= 40) score += 15;
            
            // Heart rate ≥ 125/min
            if (heartRate >= 125) score += 10;
            
            // pH < 7.35
            if (ph !== null && ph < 7.35) score += 30;
            
            // BUN > 30 mg/dL
            if (bloodUrea > 30) score += 20;
            
            // Sodium < 130 mEq/L
            if (sodium < 130) score += 20;
            
            // Glucose ≥ 250 mg/dL
            if (glucose >= 250) score += 10;
            
            // Hematocrit < 30%
            if (hematocrit < 30) score += 10;
            
            // PaO2 < 60 mmHg or O2 saturation < 90%
            if (paO2 !== null && paO2 < 60) score += 10;
            
            // Pleural effusion
            if (pleuralEffusion === 'yes') score += 10;
            
            // Display result
            document.getElementById('scoreValue').textContent = score;
            
            // Determine risk class and recommendations
            let riskClass, riskLevel, recommendation, interpretation, riskClassColor;
            
            if (score <= 50) {
                riskClass = "I";
                riskLevel = "Kelas I: Risiko Rendah";
                recommendation = "Pasien dapat dirawat sebagai pasien rawat jalan dengan pemberian antibiotik oral. Pemantauan dapat dilakukan secara rawat jalan.";
                interpretation = "Pasien memiliki risiko mortalitas rendah (0.1%). Pengobatan rawat jalan dengan antibiotik yang sesuai direkomendasikan.";
                riskClassColor = "risk-i";
            } else if (score <= 70) {
                riskClass = "II";
                riskLevel = "Kelas II: Risiko Rendah";
                recommendation = "Pasien dapat dirawat sebagai pasien rawat jalan dengan pemberian antibiotik oral. Evaluasi ulang dalam 24-48 jam dianjurkan.";
                interpretation = "Pasien memiliki risiko mortalitas rendah (0.6%). Rawat jalan dengan pemantauan ketat direkomendasikan.";
                riskClassColor = "risk-ii";
            } else if (score <= 90) {
                riskClass = "III";
                riskLevel = "Kelas III: Risiko Sedang";
                recommendation = "Pertimbangkan observasi singkat di unit gawat darurat atau rawat inap singkat (23 jam). Antibiotik intravena dapat dipertimbangkan.";
                interpretation = "Pasien memiliki risiko mortalitas sedang (0.9%). Observasi singkat atau rawat inap singkat mungkin diperlukan.";
                riskClassColor = "risk-iii";
            } else if (score <= 130) {
                riskClass = "IV";
                riskLevel = "Kelas IV: Risiko Tinggi";
                recommendation = "Direkomendasikan untuk rawat inap dengan pemantauan ketat. Antibiotik intravena biasanya diperlukan.";
                interpretation = "Pasien memiliki risiko mortalitas tinggi (9.3%). Rawat inap dengan terapi antibiotik intravena diperlukan.";
                riskClassColor = "risk-iv";
            } else {
                riskClass = "V";
                riskLevel = "Kelas V: Risiko Sangat Tinggi";
                recommendation = "Diperlukan rawat inap, mungkin di unit perawatan intensif. Terapi antibiotik intravena spektrum luas dan pemantauan ketat diperlukan.";
                interpretation = "Pasien memiliki risiko mortalitas sangat tinggi (27.0%). Rawat inap, kemungkinan di ICU, dengan terapi agresif diperlukan.";
                riskClassColor = "risk-v";
            }
            
            // Display risk level and recommendations
            const riskLevelElement = document.getElementById('riskLevel');
            riskLevelElement.textContent = riskLevel;
            riskLevelElement.className = `risk-level ${riskClassColor}`;
            
            document.getElementById('recommendationText').textContent = recommendation;
            document.getElementById('interpretationText').textContent = interpretation;
            
            // Show result container and hide empty state
            document.getElementById('result').style.display = 'block';
            document.getElementById('emptyState').style.display = 'none';
            
            // Scroll to result
            document.getElementById('result').scrollIntoView({ behavior: 'smooth', block: 'nearest' });
        }
        
        // Inisialisasi saat halaman dimuat
        window.onload = function() {
            // Reset form untuk memastikan semua input kosong
            resetForm();
            
            // Tambahkan event listener untuk menghapus error saat input diubah
            const inputs = document.querySelectorAll('input, select');
            inputs.forEach(input => {
                input.addEventListener('input', function() {
                    this.classList.remove('error');
                    const errorId = this.id + '-error';
                    if (document.getElementById(errorId)) {
                        document.getElementById(errorId).style.display = 'none';
                    }
                });
            });
            
            // Event listener khusus untuk radio buttons
            const radioButtons = document.querySelectorAll('input[type="radio"]');
            radioButtons.forEach(radio => {
                radio.addEventListener('change', function() {
                    document.getElementById('gender-error').style.display = 'none';
                });
            });
        };
    </script>
</body>
</html>