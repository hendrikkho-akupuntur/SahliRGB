<!DOCTYPE html>
<html lang="id">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>Screening Lansia Komprehensif</title>
    <link rel="stylesheet" href="https://cdnjs.cloudflare.com/ajax/libs/font-awesome/6.4.0/css/all.min.css">
    <style>
        * {
            margin: 0;
            padding: 0;
            box-sizing: border-box;
            font-family: 'Segoe UI', Tahoma, Geneva, Verdana, sans-serif;
        }
        
        body {
            background-color: #f8f9fa;
            color: #333;
            line-height: 1.6;
            padding: 20px;
            max-width: 1200px;
            margin: 0 auto;
        }
        
        header {
            display: flex;
            align-items: center;
            background: linear-gradient(135deg, #4a6fa5 0%, #2c4d80 100%);
            color: white;
            padding: 25px;
            border-radius: 15px;
            margin-bottom: 30px;
            box-shadow: 0 5px 15px rgba(0, 0, 0, 0.1);
        }
        
        .logo-container {
            display: flex;
            gap: 20px;
            margin-right: 30px;
        }
        
        .logo {
            height: 80px;
            width: auto;
            object-fit: contain;
            border-radius: 8px;
            background-color: white;
            padding: 5px;
        }
        
        .header-text {
            flex-grow: 1;
        }
        
        h1 {
            font-size: 28px;
            margin-bottom: 10px;
            font-weight: 600;
        }
        
        .subtitle {
            font-size: 18px;
            opacity: 0.9;
            font-weight: 300;
        }
        
        .intro {
            background-color: white;
            padding: 25px;
            border-radius: 15px;
            margin-bottom: 30px;
            box-shadow: 0 3px 10px rgba(0, 0, 0, 0.08);
            border-left: 6px solid #4a6fa5;
        }
        
        .intro p {
            margin-bottom: 15px;
            color: #555;
        }
        
        .screening-container {
            display: grid;
            grid-template-columns: repeat(auto-fill, minmax(500px, 1fr));
            gap: 25px;
            margin-bottom: 40px;
        }
        
        .screening-card {
            background-color: white;
            border-radius: 15px;
            padding: 25px;
            box-shadow: 0 3px 10px rgba(0, 0, 0, 0.08);
            transition: transform 0.3s ease, box-shadow 0.3s ease;
        }
        
        .screening-card:hover {
            transform: translateY(-5px);
            box-shadow: 0 8px 20px rgba(0, 0, 0, 0.1);
        }
        
        .screening-title {
            display: flex;
            align-items: center;
            margin-bottom: 20px;
            padding-bottom: 15px;
            border-bottom: 2px solid #f0f0f0;
            color: #2c4d80;
        }
        
        .screening-title i {
            margin-right: 12px;
            font-size: 24px;
            color: #4a6fa5;
        }
        
        .screening-title h2 {
            font-size: 22px;
        }
        
        .form-group {
            margin-bottom: 20px;
        }
        
        label {
            display: block;
            margin-bottom: 8px;
            font-weight: 500;
            color: #444;
        }
        
        select, input[type="number"], input[type="text"], textarea {
            width: 100%;
            padding: 12px 15px;
            border: 1px solid #ddd;
            border-radius: 8px;
            font-size: 16px;
            transition: border 0.3s ease;
        }
        
        select:focus, input:focus, textarea:focus {
            border-color: #4a6fa5;
            outline: none;
        }
        
        .radio-group, .checkbox-group {
            display: flex;
            flex-wrap: wrap;
            gap: 15px;
            margin-top: 10px;
        }
        
        .radio-option, .checkbox-option {
            display: flex;
            align-items: center;
        }
        
        .radio-option input, .checkbox-option input {
            margin-right: 8px;
        }
        
        .score-display {
            background-color: #f8f9fa;
            padding: 15px;
            border-radius: 10px;
            margin-top: 15px;
            font-weight: 600;
            text-align: center;
            border-left: 4px solid #4a6fa5;
        }
        
        .button-group {
            display: flex;
            justify-content: center;
            gap: 20px;
            margin: 40px 0;
        }
        
        button {
            padding: 15px 30px;
            border: none;
            border-radius: 10px;
            font-size: 18px;
            font-weight: 600;
            cursor: pointer;
            transition: all 0.3s ease;
            display: flex;
            align-items: center;
            justify-content: center;
            gap: 10px;
        }
        
        #calculate-btn {
            background-color: #4a6fa5;
            color: white;
        }
        
        #calculate-btn:hover {
            background-color: #3a5a85;
        }
        
        #reset-btn {
            background-color: #f8f9fa;
            color: #555;
            border: 2px solid #ddd;
        }
        
        #reset-btn:hover {
            background-color: #e9ecef;
        }
        
        #print-btn {
            background-color: #28a745;
            color: white;
        }
        
        #print-btn:hover {
            background-color: #218838;
        }
        
        .results-section {
            background-color: white;
            padding: 30px;
            border-radius: 15px;
            box-shadow: 0 3px 10px rgba(0, 0, 0, 0.08);
            margin-bottom: 40px;
        }
        
        .results-title {
            text-align: center;
            margin-bottom: 30px;
            color: #2c4d80;
            font-size: 26px;
            padding-bottom: 15px;
            border-bottom: 2px solid #f0f0f0;
        }
        
        .results-container {
            display: grid;
            grid-template-columns: repeat(auto-fill, minmax(300px, 1fr));
            gap: 20px;
            margin-bottom: 30px;
        }
        
        .result-item {
            background-color: #f8f9fa;
            padding: 20px;
            border-radius: 10px;
            border-left: 4px solid #4a6fa5;
        }
        
        .result-item h3 {
            font-size: 18px;
            margin-bottom: 10px;
            color: #2c4d80;
        }
        
        .result-score {
            font-size: 22px;
            font-weight: 700;
            margin-bottom: 10px;
        }
        
        .result-interpretation {
            font-style: italic;
            color: #555;
        }
        
        .overall-summary {
            background-color: #f0f8ff;
            padding: 25px;
            border-radius: 10px;
            margin-top: 30px;
            border: 1px solid #d0e3ff;
        }
        
        .overall-summary h3 {
            color: #2c4d80;
            margin-bottom: 15px;
        }
        
        .overall-summary ul {
            padding-left: 20px;
        }
        
        .overall-summary li {
            margin-bottom: 10px;
        }
        
        footer {
            text-align: center;
            padding: 30px;
            background: linear-gradient(135deg, #f8f9fa 0%, #e9ecef 100%);
            border-radius: 15px;
            margin-top: 30px;
            color: #666;
            border-top: 1px solid #ddd;
        }
        
        .developer {
            font-weight: 600;
            margin: 15px 0;
            color: #2c4d80;
        }
        
        .copyright {
            font-size: 14px;
            margin-top: 10px;
        }
        
        .print-only {
            display: none;
        }
        
        @media print {
            body {
                padding: 0;
                background-color: white;
                max-width: 100%;
            }
            
            header, .intro, .screening-container, .button-group, footer {
                display: none !important;
            }
            
            .print-only {
                display: block;
                text-align: center;
                margin-bottom: 20px;
            }
            
            .print-logo {
                height: 60px;
                margin: 0 15px;
            }
            
            .results-section {
                box-shadow: none;
                margin: 0;
                padding: 20px;
            }
            
            .results-title {
                font-size: 22px;
            }
            
            .result-item {
                break-inside: avoid;
            }
        }
        
        @media (max-width: 768px) {
            .screening-container {
                grid-template-columns: 1fr;
            }
            
            header {
                flex-direction: column;
                text-align: center;
            }
            
            .logo-container {
                margin-right: 0;
                margin-bottom: 20px;
            }
        }
        
        .tooltip {
            position: relative;
            display: inline-block;
            cursor: pointer;
            color: #4a6fa5;
            margin-left: 5px;
        }
        
        .tooltip .tooltiptext {
            visibility: hidden;
            width: 300px;
            background-color: #333;
            color: #fff;
            text-align: left;
            border-radius: 6px;
            padding: 10px;
            position: absolute;
            z-index: 1;
            bottom: 125%;
            left: 50%;
            margin-left: -150px;
            opacity: 0;
            transition: opacity 0.3s;
            font-size: 14px;
            font-weight: normal;
        }
        
        .tooltip:hover .tooltiptext {
            visibility: visible;
            opacity: 1;
        }
    </style>
</head>
<body>
    <header>
        <div class="logo-container">
            <img src="KKLP.jpg" alt="Logo KKLP" class="logo" id="logo-kklp">
            <img src="fkuph.jpg" alt="Logo FK UPH" class="logo" id="logo-fkuph">
        </div>
        <div class="header-text">
            <h1>Screening Lansia Komprehensif</h1>
            <p class="subtitle">Alat Penilaian Geriatri Holistik Berbasis Web</p>
            <p class="subtitle">Mencakup 15 Aspek Kesehatan Lansia</p>
        </div>
    </header>
    
    <section class="intro">
        <h2>Selamat Datang di Alat Screening Lansia</h2>
        <p>Alat ini dirancang untuk membantu tenaga kesehatan dalam melakukan penilaian komprehensif pada lansia dengan pendekatan holistik. Screening ini mencakup 15 aspek penting kesehatan lansia yang dikenal dengan istilah "I" dan aspek terkait lainnya.</p>
        <p>Silakan isi semua bagian formulir di bawah ini sesuai dengan kondisi pasien lansia. Setelah semua bagian terisi, klik tombol <strong>"Hitung Hasil Screening"</strong> untuk mendapatkan hasil dan rekomendasi.</p>
        <p>Semua data yang dimasukkan akan diproses secara lokal di perangkat Anda dan tidak dikirim ke server manapun.</p>
    </section>
    
    <main>
        <div class="screening-container" id="screeningForms">
            <!-- Formulir screening akan diisi dengan JavaScript -->
        </div>
        
        <div class="button-group">
            <button id="calculate-btn">
                <i class="fas fa-calculator"></i> Hitung Hasil Screening
            </button>
            <button id="reset-btn">
                <i class="fas fa-redo"></i> Reset Formulir
            </button>
            <button id="print-btn" style="display:none;">
                <i class="fas fa-print"></i> Cetak Hasil
            </button>
        </div>
        
        <section class="results-section" id="resultsSection" style="display:none;">
            <h2 class="results-title">Hasil Screening Lansia</h2>
            
            <div class="print-only">
                <img src="KKLP.jpg" alt="Logo KKLP" class="print-logo">
                <img src="fkuph.jpg" alt="Logo FK UPH" class="print-logo">
                <h2>Screening Lansia Komprehensif</h2>
                <p>Hasil Penilaian Holistik</p>
                <hr>
            </div>
            
            <div class="results-container" id="resultsContainer">
                <!-- Hasil screening akan diisi dengan JavaScript -->
            </div>
            
            <div class="overall-summary" id="overallSummary">
                <!-- Ringkasan keseluruhan akan diisi dengan JavaScript -->
            </div>
            
            <div class="button-group">
                <button id="print-btn-final">
                    <i class="fas fa-print"></i> Cetak Hasil Screening
                </button>
            </div>
        </section>
    </main>
    
    <footer>
        <p class="developer">Dikembangkan Oleh Prodi PPDS KKLP FK UPH - dr Hendrik</p>
        <p>© 2025 - Program Studi Spesialis Kedokteran Primer FK UPH</p>
        <p class="copyright">Alat ini ditujukan untuk keperluan skrining klinis dan tidak menggantikan penilaian medis lengkap oleh tenaga kesehatan profesional.</p>
    </footer>

    <script>
        // Data skrining dengan semua instrumen
        const screeningData = [
            {
                id: "mmse",
                title: "Intellectual Impairment (MMSE)",
                icon: "fas fa-brain",
                type: "score",
                questions: [
                    { id: "q1", text: "Orientasi Waktu (tanggal, bulan, tahun, musim, hari)", max: 5 },
                    { id: "q2", text: "Orientasi Tempat (negara, provinsi, kota, rumah sakit, lantai)", max: 5 },
                    { id: "q3", text: "Registrasi (mengingat 3 benda)", max: 3 },
                    { id: "q4", text: "Perhatian dan Kalkulasi (serial 7 atau mengeja mundur)", max: 5 },
                    { id: "q5", text: "Mengingat (3 benda yang sudah disebutkan)", max: 3 },
                    { id: "q6", text: "Bahasa (menamai benda, mengulang kalimat, perintah, menulis, menyalin)", max: 9 }
                ],
                interpretation: {
                    "≥24": "Normal",
                    "18-23": "Gangguan kognitif ringan",
                    "≤17": "Demensia"
                }
            },
            {
                id: "ems",
                title: "Immobility (Elderly Mobility Scale)",
                icon: "fas fa-wheelchair",
                type: "score",
                questions: [
                    { id: "q1", text: "Bangun dari kursi", max: 3 },
                    { id: "q2", text: "Berjalan", max: 3 },
                    { id: "q3", text: "Keseimbangan statis", max: 4 },
                    { id: "q4", text: "Keseimbangan dinamis", max: 4 },
                    { id: "q5", text: "Kemandirian fungsional", max: 6 }
                ],
                interpretation: {
                    "20": "Mobilitas sangat baik",
                    "16-19": "Mobilitas baik",
                    "10-15": "Mobilitas sedang",
                    "<10": "Mobilitas buruk"
                }
            },
            {
                id: "tug",
                title: "Instability - Rawat Jalan (Timed Up and Go Test)",
                icon: "fas fa-walking",
                type: "time",
                question: "Waktu yang dibutuhkan untuk bangun dari kursi, berjalan 3 meter, berbalik, kembali dan duduk (detik)",
                interpretation: {
                    "<10": "Normal",
                    "10-19": "Risiko jatuh ringan",
                    "20-29": "Risiko jatuh sedang",
                    "≥30": "Risiko jatuh tinggi"
                }
            },
            {
                id: "morse",
                title: "Instability - Rawat Inap (Skala Morse)",
                icon: "fas fa-procedures",
                type: "score",
                questions: [
                    { id: "q1", text: "Riwayat jatuh", options: {"Tidak": 0, "Ya": 25} },
                    { id: "q2", text: "Diagnosis sekunder", options: {"Tidak": 0, "Ya": 15} },
                    { id: "q3", text: "Alat bantu jalan", options: {"Tidak ada/Tidak perlu/Berdiri dengan kursi": 0, "Kruk/Tongkat": 15, "Berpegangan pada perabot": 30} },
                    { id: "q4", text: "Terapi intravena", options: {"Tidak": 0, "Ya": 20} },
                    { id: "q5", text: "Gaya berjalan", options: {"Normal/Berdiri": 0, "Lemah": 10, "Terganggu": 20} },
                    { id: "q6", text: "Status mental", options: {"Menyadari kemampuan sendiri": 0, "Lupa akan keterbatasan": 15} }
                ],
                interpretation: {
                    "0-24": "Risiko rendah",
                    "25-50": "Risiko sedang",
                    ">50": "Risiko tinggi"
                }
            },
            {
                id: "ruis",
                title: "Incontinence (Revised Urinary Incontinence Scale)",
                icon: "fas fa-toilet",
                type: "score",
                questions: [
                    { id: "q1", text: "Frekuensi inkontinensia", options: {"Tidak pernah": 0, "≤1x/minggu": 2, "2-3x/minggu": 4, "1x/hari": 6, ">1x/hari": 8} },
                    { id: "q2", text: "Volume urine yang keluar", options: {"Tidak ada/tetes": 0, "Sedikit": 2, "Sedang": 4, "Banyak": 6} },
                    { id: "q3", text: "Pengaruh terhadap aktivitas", options: {"Tidak ada": 0, "Sedikit": 2, "Sedang": 4, "Berat": 6} }
                ],
                interpretation: {
                    "0": "Tidak ada inkontinensia",
                    "1-6": "Ringan",
                    "7-12": "Sedang",
                    "13-20": "Berat"
                }
            },
            {
                id: "news",
                title: "Infection (National Early Warning Score)",
                icon: "fas fa-virus",
                type: "score",
                questions: [
                    { id: "q1", text: "Frekuensi pernapasan (x/menit)", options: {"≤8": 3, "9-11": 1, "12-20": 0, "21-24": 2, "≥25": 3} },
                    { id: "q2", text: "Saturasi Oksigen (%)", options: {"≤91": 3, "92-93": 2, "94-95": 1, "≥96": 0} },
                    { id: "q3", text: "Suhu (°C)", options: {"≤35.0": 3, "35.1-36.0": 1, "36.1-38.0": 0, "38.1-39.0": 1, "≥39.1": 2} },
                    { id: "q4", text: "Tekanan darah sistolik (mmHg)", options: {"≤90": 3, "91-100": 2, "101-110": 1, "111-219": 0, "≥220": 3} },
                    { id: "q5", text: "Denyut jantung (x/menit)", options: {"≤40": 3, "41-50": 1, "51-90": 0, "91-110": 1, "111-130": 2, "≥131": 3} },
                    { id: "q6", text: "Kesadaran", options: {"Sadar": 0, "Mengantuk/Confusion": 3} }
                ],
                interpretation: {
                    "0": "Risiko rendah",
                    "1-4": "Risiko sedang",
                    "5-6": "Risiko tinggi",
                    "≥7": "Risiko sangat tinggi"
                }
            },
            {
                id: "sensory",
                title: "Impairment of Hearing and Vision",
                icon: "fas fa-ear-deaf",
                type: "checkbox",
                questions: [
                    { id: "hearing", text: "Gangguan pendengaran" },
                    { id: "vision", text: "Gangguan penglihatan" }
                ],
                interpretation: "Catat adanya gangguan pendengaran dan/atau penglihatan"
            },
            {
                id: "ods",
                title: "Impaction (Modified Obstipation/Defecation Score)",
                icon: "fas fa-stomach",
                type: "score",
                questions: [
                    { id: "q1", text: "Frekuensi BAB", options: {"Setiap hari": 0, "2-3 hari sekali": 1, "4-6 hari sekali": 2, "≥7 hari sekali": 3} },
                    { id: "q2", text: "Konsistensi feses", options: {"Lunak": 0, "Keras": 1, "Sangat keras": 2} },
                    { id: "q3", text: "Kesulitan mengejan", options: {"Tidak": 0, "Ya": 1} },
                    { id: "q4", text: "Perasaan tidak tuntas", options: {"Tidak": 0, "Ya": 1} }
                ],
                interpretation: {
                    "0": "Normal",
                    "1-3": "Konstipasi ringan",
                    "4-7": "Konstipasi sedang-berat"
                }
            },
            {
                id: "gds",
                title: "Isolation (Geriatric Depression Scale)",
                icon: "fas fa-sad-tear",
                type: "score",
                questions: [
                    { id: "q1", text: "Apakah Anda pada dasarnya puas dengan hidup Anda?", options: {"Ya": 0, "Tidak": 1} },
                    { id: "q2", text: "Apakah Anda telah melepaskan banyak kegiatan dan minat Anda?", options: {"Ya": 1, "Tidak": 0} },
                    { id: "q3", text: "Apakah Anda merasa hidup Anda kosong?", options: {"Ya": 1, "Tidak": 0} },
                    { id: "q4", text: "Apakah Anda sering merasa bosan?", options: {"Ya": 1, "Tidak": 0} },
                    { id: "q5", text: "Apakah Anda dalam suasana hati yang baik hampir sepanjang waktu?", options: {"Ya": 0, "Tidak": 1} }
                ],
                interpretation: {
                    "0-1": "Tidak ada depresi",
                    "2-3": "Depresi ringan",
                    "4-5": "Depresi sedang-berat"
                }
            },
            {
                id: "mna",
                title: "Inanition (Malnutrition) - Mini Nutritional Assessment",
                icon: "fas fa-utensils",
                type: "score",
                questions: [
                    { id: "q1", text: "Penurunan asupan makanan dalam 3 bulan terakhir", options: {"Berat": 0, "Sedang": 1, "Tidak ada": 2} },
                    { id: "q2", text: "Penurunan berat badan dalam 3 bulan terakhir", options: {">3 kg": 0, "Tidak tahu": 1, "1-3 kg": 2, "Tidak ada": 3} },
                    { id: "q3", text: "Indeks Massa Tubuh (IMT)", options: {"<19": 0, "19-21": 1, "21-23": 2, "≥23": 3} }
                ],
                interpretation: {
                    "≥12": "Status gizi normal",
                    "8-11": "Berisiko malnutrisi",
                    "≤7": "Malnutrisi"
                }
            },
            {
                id: "poverty",
                title: "Impecunity (Poverty)",
                icon: "fas fa-hand-holding-usd",
                type: "checkbox",
                question: "Apakah lansia mengalami kesulitan finansial yang mempengaruhi akses terhadap makanan, obat-obatan, atau perawatan kesehatan?",
                interpretation: "Kondisi ekonomi dapat mempengaruhi status kesehatan lansia"
            },
            {
                id: "iatrogenesis",
                title: "Iatrogenesis",
                icon: "fas fa-pills",
                type: "checkbox",
                question: "Apakah ada efek samping pengobatan atau komplikasi akibat intervensi medis?",
                interpretation: "Efek iatrogenik perlu diwaspadai pada lansia dengan polifarmasi"
            },
            {
                id: "insomnia",
                title: "Insomnia (Geriatric Sleep Questionnaire-6)",
                icon: "fas fa-bed",
                type: "score",
                questions: [
                    { id: "q1", text: "Kesulitan memulai tidur", options: {"Tidak pernah": 0, "Kadang-kadang": 1, "Sering": 2, "Selalu": 3} },
                    { id: "q2", text: "Sering terbangun malam hari", options: {"Tidak pernah": 0, "Kadang-kadang": 1, "Sering": 2, "Selalu": 3} },
                    { id: "q3", text: "Bangun terlalu pagi", options: {"Tidak pernah": 0, "Kadang-kadang": 1, "Sering": 2, "Selalu": 3} },
                    { id: "q4", text: "Mengantuk di siang hari", options: {"Tidak pernah": 0, "Kadang-kadang": 1, "Sering": 2, "Selalu": 3} }
                ],
                interpretation: {
                    "0-3": "Tidak ada gangguan tidur",
                    "4-6": "Gangguan tidur ringan",
                    "7-9": "Gangguan tidur sedang",
                    "10-12": "Gangguan tidur berat"
                }
            },
            {
                id: "immune",
                title: "Immune Deficiency",
                icon: "fas fa-shield-virus",
                type: "checkbox",
                question: "Apakah ada kondisi imunodefisiensi (HIV, pengobatan imunosupresan, kanker, dll)?",
                interpretation: "Lansia dengan imunodefisiensi berisiko tinggi terhadap infeksi"
            },
            {
                id: "asex",
                title: "Impotence (Arizona Sexual Experiences Scale)",
                icon: "fas fa-heart",
                type: "score",
                questions: [
                    { id: "q1", text: "Keinginan seksual", options: {"Sangat kuat": 0, "Kuat": 1, "Sedang": 2, "Lemah": 3, "Tidak ada": 4} },
                    { id: "q2", text: "Gairah seksual", options: {"Selalu": 0, "Sering": 1, "Kadang": 2, "Jarang": 3, "Tidak pernah": 4} },
                    { id: "q3", text: "Lubrikasi/ereksi", options: {"Selalu": 0, "Sering": 1, "Kadang": 2, "Jarang": 3, "Tidak pernah": 4} },
                    { id: "q4", text: "Kemampuan orgasme", options: {"Selalu": 0, "Sering": 1, "Kadang": 2, "Jarang": 3, "Tidak pernah": 4} },
                    { id: "q5", text: "Kepuasan orgasme", options: {"Sangat puas": 0, "Puas": 1, "Netral": 2, "Tidak puas": 3, "Sangat tidak puas": 4} }
                ],
                interpretation: {
                    "≤5": "Fungsi seksual normal",
                    "6-10": "Disfungsi seksual ringan",
                    "11-15": "Disfungsi seksual sedang",
                    "≥16": "Disfungsi seksual berat"
                }
            },
            {
                id: "frailty",
                title: "Frailty (Frailty SCORE)",
                icon: "fas fa-user-injured",
                type: "score",
                questions: [
                    { id: "q1", text: "Kelemahan (grip strength)", options: {"Normal": 0, "Melemah": 1} },
                    { id: "q2", text: "Kelelahan", options: {"Tidak": 0, "Ya": 1} },
                    { id: "q3", text: "Penurunan aktivitas fisik", options: {"Tidak": 0, "Ya": 1} },
                    { id: "q4", text: "Penurunan berat badan tidak disengaja", options: {"Tidak": 0, "Ya": 1} },
                    { id: "q5", text: "Kecepatan berjalan lambat", options: {"Tidak": 0, "Ya": 1} }
                ],
                interpretation: {
                    "0": "Tidak frail",
                    "1-2": "Pre-frail",
                    "≥3": "Frail"
                }
            },
            {
                id: "sarcf",
                title: "SARCOPENIA (SARC-F)",
                icon: "fas fa-dumbbell",
                type: "score",
                questions: [
                    { id: "q1", text: "Kekuatan (strength)", options: {"Tidak ada kesulitan": 0, "Sedikit kesulitan": 1, "Banyak kesulitan/tidak bisa": 2} },
                    { id: "q2", text: "Kemampuan berjalan (assistance in walking)", options: {"Tidak ada kesulitan": 0, "Sedikit kesulitan": 1, "Banyak kesulitan/tidak bisa": 2} },
                    { id: "q3", text: "Bangun dari kursi (rise from a chair)", options: {"Tidak ada kesulitan": 0, "Sedikit kesulitan": 1, "Banyak kesulitan/tidak bisa": 2} },
                    { id: "q4", text: "Naik tangga (climb stairs)", options: {"Tidak ada kesulitan": 0, "Sedikit kesulitan": 1, "Banyak kesulitan/tidak bisa": 2} },
                    { id: "q5", text: "Jatuh (falls)", options: {"Tidak pernah": 0, "1-3 kali": 1, "≥4 kali": 2} }
                ],
                interpretation: {
                    "0-3": "Risiko rendah sarkopenia",
                    "≥4": "Risiko tinggi sarkopenia"
                }
            }
        ];

        // Inisialisasi halaman
        document.addEventListener('DOMContentLoaded', function() {
            // Buat formulir skrining
            createScreeningForms();
            
            // Setup event listeners
            document.getElementById('calculate-btn').addEventListener('click', calculateResults);
            document.getElementById('reset-btn').addEventListener('click', resetForms);
            document.getElementById('print-btn-final').addEventListener('click', printResults);
        });

        // Fungsi untuk membuat formulir skrining
        function createScreeningForms() {
            const container = document.getElementById('screeningForms');
            
            screeningData.forEach((test, index) => {
                const card = document.createElement('div');
                card.className = 'screening-card';
                card.id = `card-${test.id}`;
                
                let html = `
                    <div class="screening-title">
                        <i class="${test.icon}"></i>
                        <h2>${test.title}</h2>
                    </div>
                `;
                
                if (test.type === 'score' && test.questions) {
                    test.questions.forEach((question, qIndex) => {
                        html += `<div class="form-group">`;
                        html += `<label for="${test.id}-${question.id}">${qIndex + 1}. ${question.text}</label>`;
                        
                        if (question.options) {
                            html += `<select id="${test.id}-${question.id}" class="score-input">`;
                            html += `<option value="">Pilih nilai</option>`;
                            for (const [optionText, value] of Object.entries(question.options)) {
                                html += `<option value="${value}">${optionText} (${value} poin)</option>`;
                            }
                            html += `</select>`;
                        } else if (question.max) {
                            html += `<input type="number" id="${test.id}-${question.id}" class="score-input" min="0" max="${question.max}" placeholder="Masukkan nilai (0-${question.max})">`;
                        }
                        
                        html += `</div>`;
                    });
                    
                    // Tambah area untuk menampilkan skor
                    html += `<div class="score-display" id="${test.id}-score-display">Skor: -</div>`;
                } 
                else if (test.type === 'time') {
                    html += `
                        <div class="form-group">
                            <label for="${test.id}-time">${test.question}</label>
                            <input type="number" id="${test.id}-time" class="score-input" min="0" placeholder="Masukkan waktu dalam detik">
                        </div>
                        <div class="score-display" id="${test.id}-score-display">Kategori: -</div>
                    `;
                }
                else if (test.type === 'checkbox') {
                    if (test.questions) {
                        test.questions.forEach((question, qIndex) => {
                            html += `
                                <div class="form-group">
                                    <label>${question.text}</label>
                                    <div class="checkbox-group">
                                        <div class="checkbox-option">
                                            <input type="checkbox" id="${test.id}-${question.id}-yes" class="checkbox-input" value="Ya">
                                            <label for="${test.id}-${question.id}-yes">Ya</label>
                                        </div>
                                        <div class="checkbox-option">
                                            <input type="checkbox" id="${test.id}-${question.id}-no" class="checkbox-input" value="Tidak">
                                            <label for="${test.id}-${question.id}-no">Tidak</label>
                                        </div>
                                    </div>
                                </div>
                            `;
                        });
                    } else {
                        html += `
                            <div class="form-group">
                                <label>${test.question}</label>
                                <div class="checkbox-group">
                                    <div class="checkbox-option">
                                        <input type="checkbox" id="${test.id}-yes" class="checkbox-input" value="Ya">
                                        <label for="${test.id}-yes">Ya</label>
                                    </div>
                                    <div class="checkbox-option">
                                        <input type="checkbox" id="${test.id}-no" class="checkbox-input" value="Tidak">
                                        <label for="${test.id}-no">Tidak</label>
                                    </div>
                                </div>
                            </div>
                        `;
                    }
                    html += `<div class="score-display" id="${test.id}-score-display">Status: -</div>`;
                }
                
                card.innerHTML = html;
                container.appendChild(card);
                
                // Tambahkan event listeners untuk input
                if (test.type === 'score' || test.type === 'time') {
                    const inputs = card.querySelectorAll('.score-input');
                    inputs.forEach(input => {
                        input.addEventListener('input', () => updateScoreDisplay(test));
                    });
                } else if (test.type === 'checkbox') {
                    const checkboxes = card.querySelectorAll('.checkbox-input');
                    checkboxes.forEach(checkbox => {
                        checkbox.addEventListener('change', function() {
                            // Uncheck other checkboxes in the same group
                            const name = this.id.split('-').slice(0, -1).join('-');
                            const groupCheckboxes = card.querySelectorAll(`input[id^="${name}"]`);
                            groupCheckboxes.forEach(cb => {
                                if (cb !== this) cb.checked = false;
                            });
                            updateScoreDisplay(test);
                        });
                    });
                }
            });
        }

        // Fungsi untuk memperbarui tampilan skor
        function updateScoreDisplay(test) {
            const display = document.getElementById(`${test.id}-score-display`);
            
            if (test.type === 'score' && test.questions) {
                let totalScore = 0;
                let allAnswered = true;
                
                test.questions.forEach(question => {
                    const input = document.getElementById(`${test.id}-${question.id}`);
                    if (input) {
                        if (input.tagName === 'SELECT') {
                            if (input.value) {
                                totalScore += parseInt(input.value);
                            } else {
                                allAnswered = false;
                            }
                        } else if (input.tagName === 'INPUT') {
                            if (input.value && input.value !== '') {
                                const value = parseInt(input.value);
                                if (value >= 0 && value <= question.max) {
                                    totalScore += value;
                                } else {
                                    allAnswered = false;
                                }
                            } else {
                                allAnswered = false;
                            }
                        }
                    }
                });
                
                if (allAnswered && test.questions.length > 0) {
                    let interpretation = "Tidak dapat diinterpretasikan";
                    
                    // Cari interpretasi berdasarkan skor
                    for (const [range, interp] of Object.entries(test.interpretation)) {
                        if (range.includes('-')) {
                            const [min, max] = range.split('-').map(Number);
                            if (totalScore >= min && totalScore <= max) {
                                interpretation = interp;
                                break;
                            }
                        } else if (range.startsWith('<')) {
                            const threshold = Number(range.substring(1));
                            if (totalScore < threshold) {
                                interpretation = interp;
                                break;
                            }
                        } else if (range.startsWith('>')) {
                            const threshold = Number(range.substring(1));
                            if (totalScore > threshold) {
                                interpretation = interp;
                                break;
                            }
                        } else if (range.startsWith('≥')) {
                            const threshold = Number(range.substring(1));
                            if (totalScore >= threshold) {
                                interpretation = interp;
                                break;
                            }
                        } else if (range.startsWith('≤')) {
                            const threshold = Number(range.substring(1));
                            if (totalScore <= threshold) {
                                interpretation = interp;
                                break;
                            }
                        } else if (!isNaN(Number(range))) {
                            if (totalScore === Number(range)) {
                                interpretation = interp;
                                break;
                            }
                        }
                    }
                    
                    display.innerHTML = `Skor: ${totalScore} - ${interpretation}`;
                } else {
                    display.innerHTML = `Skor: -`;
                }
            } 
            else if (test.type === 'time') {
                const input = document.getElementById(`${test.id}-time`);
                if (input && input.value) {
                    const time = parseFloat(input.value);
                    let interpretation = "Tidak dapat diinterpretasikan";
                    
                    // Cari interpretasi berdasarkan waktu
                    for (const [range, interp] of Object.entries(test.interpretation)) {
                        if (range.includes('-')) {
                            const [min, max] = range.split('-').map(Number);
                            if (time >= min && time <= max) {
                                interpretation = interp;
                                break;
                            }
                        } else if (range.startsWith('<')) {
                            const threshold = Number(range.substring(1));
                            if (time < threshold) {
                                interpretation = interp;
                                break;
                            }
                        } else if (range.startsWith('≥')) {
                            const threshold = Number(range.substring(1));
                            if (time >= threshold) {
                                interpretation = interp;
                                break;
                            }
                        } else if (range.startsWith('≤')) {
                            const threshold = Number(range.substring(1));
                            if (time <= threshold) {
                                interpretation = interp;
                                break;
                            }
                        }
                    }
                    
                    display.innerHTML = `Waktu: ${time} detik - ${interpretation}`;
                } else {
                    display.innerHTML = `Kategori: -`;
                }
            }
            else if (test.type === 'checkbox') {
                let status = "Belum diisi";
                
                if (test.questions) {
                    const values = [];
                    test.questions.forEach(question => {
                        const yesCheckbox = document.getElementById(`${test.id}-${question.id}-yes`);
                        const noCheckbox = document.getElementById(`${test.id}-${question.id}-no`);
                        
                        if (yesCheckbox && yesCheckbox.checked) {
                            values.push(`${question.text}: Ya`);
                        } else if (noCheckbox && noCheckbox.checked) {
                            values.push(`${question.text}: Tidak`);
                        } else {
                            values.push(`${question.text}: Belum diisi`);
                        }
                    });
                    
                    status = values.join(', ');
                } else {
                    const yesCheckbox = document.getElementById(`${test.id}-yes`);
                    const noCheckbox = document.getElementById(`${test.id}-no`);
                    
                    if (yesCheckbox && yesCheckbox.checked) {
                        status = "Ya";
                    } else if (noCheckbox && noCheckbox.checked) {
                        status = "Tidak";
                    }
                }
                
                display.innerHTML = `Status: ${status}`;
            }
        }

        // Fungsi untuk menghitung semua hasil
        function calculateResults() {
            const results = [];
            let hasUnanswered = false;
            
            // Hitung skor untuk setiap tes
            screeningData.forEach(test => {
                let score = 0;
                let interpretation = "";
                let details = "";
                
                if (test.type === 'score' && test.questions) {
                    let totalScore = 0;
                    let allAnswered = true;
                    
                    test.questions.forEach(question => {
                        const input = document.getElementById(`${test.id}-${question.id}`);
                        if (input) {
                            if (input.tagName === 'SELECT') {
                                if (input.value) {
                                    totalScore += parseInt(input.value);
                                    details += `${question.text}: ${input.options[input.selectedIndex].text.split(' (')[0]}<br>`;
                                } else {
                                    allAnswered = false;
                                }
                            } else if (input.tagName === 'INPUT') {
                                if (input.value && input.value !== '') {
                                    const value = parseInt(input.value);
                                    if (value >= 0 && value <= question.max) {
                                        totalScore += value;
                                        details += `${question.text}: ${value}/${question.max}<br>`;
                                    } else {
                                        allAnswered = false;
                                    }
                                } else {
                                    allAnswered = false;
                                }
                            }
                        }
                    });
                    
                    if (allAnswered && test.questions.length > 0) {
                        score = totalScore;
                        
                        // Cari interpretasi berdasarkan skor
                        for (const [range, interp] of Object.entries(test.interpretation)) {
                            if (range.includes('-')) {
                                const [min, max] = range.split('-').map(Number);
                                if (score >= min && score <= max) {
                                    interpretation = interp;
                                    break;
                                }
                            } else if (range.startsWith('<')) {
                                const threshold = Number(range.substring(1));
                                if (score < threshold) {
                                    interpretation = interp;
                                    break;
                                }
                            } else if (range.startsWith('>')) {
                                const threshold = Number(range.substring(1));
                                if (score > threshold) {
                                    interpretation = interp;
                                    break;
                                }
                            } else if (range.startsWith('≥')) {
                                const threshold = Number(range.substring(1));
                                if (score >= threshold) {
                                    interpretation = interp;
                                    break;
                                }
                            } else if (range.startsWith('≤')) {
                                const threshold = Number(range.substring(1));
                                if (score <= threshold) {
                                    interpretation = interp;
                                    break;
                                }
                            } else if (!isNaN(Number(range))) {
                                if (score === Number(range)) {
                                    interpretation = interp;
                                    break;
                                }
                            }
                        }
                    } else {
                        hasUnanswered = true;
                        interpretation = "Data tidak lengkap";
                    }
                } 
                else if (test.type === 'time') {
                    const input = document.getElementById(`${test.id}-time`);
                    if (input && input.value) {
                        const time = parseFloat(input.value);
                        score = time;
                        details = `Waktu: ${time} detik`;
                        
                        // Cari interpretasi berdasarkan waktu
                        for (const [range, interp] of Object.entries(test.interpretation)) {
                            if (range.includes('-')) {
                                const [min, max] = range.split('-').map(Number);
                                if (time >= min && time <= max) {
                                    interpretation = interp;
                                    break;
                                }
                            } else if (range.startsWith('<')) {
                                const threshold = Number(range.substring(1));
                                if (time < threshold) {
                                    interpretation = interp;
                                    break;
                                }
                            } else if (range.startsWith('≥')) {
                                const threshold = Number(range.substring(1));
                                if (time >= threshold) {
                                    interpretation = interp;
                                    break;
                                }
                            } else if (range.startsWith('≤')) {
                                const threshold = Number(range.substring(1));
                                if (time <= threshold) {
                                    interpretation = interp;
                                    break;
                                }
                            }
                        }
                    } else {
                        hasUnanswered = true;
                        interpretation = "Data tidak lengkap";
                    }
                }
                else if (test.type === 'checkbox') {
                    if (test.questions) {
                        const values = [];
                        test.questions.forEach(question => {
                            const yesCheckbox = document.getElementById(`${test.id}-${question.id}-yes`);
                            const noCheckbox = document.getElementById(`${test.id}-${question.id}-no`);
                            
                            if (yesCheckbox && yesCheckbox.checked) {
                                values.push(`${question.text}: Ya`);
                                details += `${question.text}: Ya<br>`;
                            } else if (noCheckbox && noCheckbox.checked) {
                                values.push(`${question.text}: Tidak`);
                                details += `${question.text}: Tidak<br>`;
                            } else {
                                hasUnanswered = true;
                                details += `${question.text}: Belum diisi<br>`;
                            }
                        });
                        
                        interpretation = test.interpretation || "Tergantung kondisi";
                        score = values.length > 0 ? 1 : 0;
                    } else {
                        const yesCheckbox = document.getElementById(`${test.id}-yes`);
                        const noCheckbox = document.getElementById(`${test.id}-no`);
                        
                        if (yesCheckbox && yesCheckbox.checked) {
                            details = "Ya";
                            interpretation = test.interpretation || "Perlu perhatian";
                            score = 1;
                        } else if (noCheckbox && noCheckbox.checked) {
                            details = "Tidak";
                            interpretation = "Tidak ada masalah";
                            score = 0;
                        } else {
                            hasUnanswered = true;
                            details = "Belum diisi";
                            interpretation = "Data tidak lengkap";
                        }
                    }
                }
                
                results.push({
                    id: test.id,
                    title: test.title,
                    score: score,
                    interpretation: interpretation,
                    details: details,
                    type: test.type
                });
            });
            
            // Tampilkan hasil jika semua sudah diisi
            if (hasUnanswered) {
                alert("Harap lengkapi semua bagian formulir sebelum menghitung hasil.");
                return;
            }
            
            displayResults(results);
        }

        // Fungsi untuk menampilkan hasil
        function displayResults(results) {
            const container = document.getElementById('resultsContainer');
            container.innerHTML = '';
            
            results.forEach(result => {
                const item = document.createElement('div');
                item.className = 'result-item';
                
                let scoreDisplay = "";
                if (result.type === 'time') {
                    scoreDisplay = `${result.score} detik`;
                } else if (result.type === 'checkbox') {
                    scoreDisplay = result.details;
                } else {
                    scoreDisplay = result.score;
                }
                
                item.innerHTML = `
                    <h3>${result.title}</h3>
                    <div class="result-score">${scoreDisplay}</div>
                    <div class="result-interpretation"><strong>Interpretasi:</strong> ${result.interpretation}</div>
                    <div class="result-details"><small>${result.details}</small></div>
                `;
                
                container.appendChild(item);
            });
            
            // Buat ringkasan keseluruhan
            const summaryContainer = document.getElementById('overallSummary');
            let summaryHTML = `
                <h3>Ringkasan Hasil Screening</h3>
                <p>Berdasarkan hasil screening komprehensif, berikut rekomendasi umum:</p>
                <ul>
            `;
            
            // Identifikasi area yang memerlukan perhatian
            const criticalResults = results.filter(r => 
                (r.type === 'score' && r.interpretation && (r.interpretation.includes('berat') || r.interpretation.includes('tinggi') || r.interpretation.includes('Frail') || r.interpretation.includes('Demensia') || r.interpretation.includes('Malnutrisi'))) ||
                (r.type === 'time' && r.interpretation && r.interpretation.includes('tinggi')) ||
                (r.type === 'checkbox' && r.details && r.details.includes('Ya'))
            );
            
            if (criticalResults.length > 0) {
                summaryHTML += `<li><strong>Area yang memerlukan perhatian segera:</strong> ${criticalResults.map(r => r.title).join(', ')}</li>`;
            }
            
            // Hitung jumlah area dengan masalah
            const problemAreas = results.filter(r => 
                !r.interpretation.includes('Normal') && 
                !r.interpretation.includes('Tidak ada') && 
                !r.interpretation.includes('tidak lengkap') &&
                !r.interpretation.includes('Tidak ada masalah')
            ).length;
            
            summaryHTML += `<li><strong>Jumlah area dengan masalah:</strong> ${problemAreas} dari ${results.length} area screening</li>`;
            summaryHTML += `<li><strong>Rekomendasi:</strong> Konsultasi dengan dokter geriatri atau spesialis kedokteran primer untuk penanganan lebih lanjut</li>`;
            summaryHTML += `<li><strong>Follow-up:</strong> Pemantauan berkala disarankan setiap 3-6 bulan tergantung tingkat keparahan</li>`;
            summaryHTML += `</ul>`;
            
            summaryContainer.innerHTML = summaryHTML;
            
            // Tampilkan bagian hasil
            document.getElementById('resultsSection').style.display = 'block';
            document.getElementById('print-btn').style.display = 'flex';
            
            // Scroll ke hasil
            document.getElementById('resultsSection').scrollIntoView({ behavior: 'smooth' });
        }

        // Fungsi untuk mereset formulir
        function resetForms() {
            if (confirm("Apakah Anda yakin ingin mereset semua formulir? Semua data yang telah dimasukkan akan hilang.")) {
                // Reset semua input
                document.querySelectorAll('input, select, textarea').forEach(input => {
                    if (input.type === 'checkbox') {
                        input.checked = false;
                    } else if (input.type === 'number' || input.type === 'text') {
                        input.value = '';
                    } else if (input.tagName === 'SELECT') {
                        input.selectedIndex = 0;
                    }
                });
                
                // Reset semua tampilan skor
                document.querySelectorAll('.score-display').forEach(display => {
                    if (display.id.includes('score-display')) {
                        if (display.id.includes('time')) {
                            display.innerHTML = 'Kategori: -';
                        } else if (display.id.includes('checkbox')) {
                            display.innerHTML = 'Status: -';
                        } else {
                            display.innerHTML = 'Skor: -';
                        }
                    }
                });
                
                // Sembunyikan hasil
                document.getElementById('resultsSection').style.display = 'none';
                document.getElementById('print-btn').style.display = 'none';
                
                alert("Formulir telah direset. Silakan isi kembali data screening.");
            }
        }

        // Fungsi untuk mencetak hasil
        function printResults() {
            window.print();
        }
    </script>
</body>
</html>